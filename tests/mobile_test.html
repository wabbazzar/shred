<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Mobile Touch Test - 6Week Shred</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, sans-serif;
            background: #121212;
            color: #FFFFFF;
            padding: 20px;
            overflow-x: hidden;
        }

        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            background: #1E1E1E;
            border-radius: 12px;
            border: 1px solid #333;
        }

        .test-title {
            color: #FF6B00;
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .test-description {
            color: #AAA;
            font-size: 14px;
            margin-bottom: 20px;
            line-height: 1.4;
        }

        /* Swipe Test Area */
        .swipe-container {
            position: relative;
            height: 200px;
            background: #2A2A2A;
            border-radius: 8px;
            overflow: hidden;
            touch-action: pan-x;
        }

        .swipe-panel {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: 600;
            transition: transform 0.3s ease;
        }

        .swipe-panel.day1 { background: linear-gradient(135deg, #FF6B00, #FF8533); }
        .swipe-panel.day2 { background: linear-gradient(135deg, #00C851, #00A644); }
        .swipe-panel.day3 { background: linear-gradient(135deg, #2196F3, #1976D2); }

        .swipe-indicator {
            text-align: center;
            margin-top: 10px;
            color: #FF6B00;
            font-size: 14px;
        }

        /* Touch Target Test */
        .touch-targets {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(44px, 1fr));
            gap: 10px;
            margin: 20px 0;
        }

        .touch-target {
            width: 44px;
            height: 44px;
            background: #FF6B00;
            border: none;
            border-radius: 8px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
        }

        .touch-target:active {
            transform: scale(0.95);
            background: #FF8533;
        }

        .touch-target.tapped {
            background: #00C851;
            transform: scale(1.1);
        }

        /* Collapsible Section Test */
        .collapsible-section {
            border: 1px solid #333;
            border-radius: 8px;
            margin: 10px 0;
            overflow: hidden;
        }

        .section-header {
            padding: 16px;
            background: #2A2A2A;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            min-height: 44px;
            touch-action: manipulation;
        }

        .section-header:active {
            background: #333;
        }

        .chevron {
            font-size: 18px;
            transition: transform 0.3s ease;
            color: #FF6B00;
        }

        .chevron.expanded {
            transform: rotate(180deg);
        }

        .section-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
            background: #1E1E1E;
        }

        .section-content.expanded {
            max-height: 200px;
        }

        .section-inner {
            padding: 16px;
        }

        /* Input Field Test */
        .input-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
            gap: 12px;
            margin: 20px 0;
        }

        .exercise-input {
            padding: 12px;
            background: #2A2A2A;
            border: 2px solid #444;
            border-radius: 8px;
            color: white;
            font-size: 16px;
            text-align: center;
            min-height: 44px;
            transition: all 0.2s ease;
        }

        .exercise-input:focus {
            outline: none;
            border-color: #FF6B00;
            background: #333;
        }

        .exercise-input::placeholder {
            color: #888;
        }

        /* Results Display */
        .test-results {
            background: #0D1117;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 12px;
            max-height: 150px;
            overflow-y: auto;
        }

        .result-success { color: #00C851; }
        .result-warning { color: #FF6B00; }
        .result-error { color: #FF4444; }

        /* Performance Monitor */
        .perf-monitor {
            position: fixed;
            top: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.8);
            padding: 10px;
            border-radius: 8px;
            font-size: 12px;
            font-family: monospace;
            z-index: 1000;
        }

        .fps-counter { color: #00C851; }
        .touch-latency { color: #FF6B00; }
    </style>
</head>
<body>
    <div class="perf-monitor">
        <div class="fps-counter">FPS: <span id="fpsValue">--</span></div>
        <div class="touch-latency">Touch: <span id="touchLatency">--</span>ms</div>
    </div>

    <h1 style="color: #FF6B00; margin-bottom: 20px; text-align: center;">Mobile Touch Test Suite</h1>

    <div class="test-section">
        <div class="test-title">üîÑ Swipe Gesture Test</div>
        <div class="test-description">
            Swipe left/right to navigate between days. Must detect 30px minimum threshold and animate smoothly.
        </div>
        <div class="swipe-container" id="swipeContainer">
            <div class="swipe-panel day1" id="panel1">Day 1</div>
            <div class="swipe-panel day2" id="panel2" style="transform: translateX(100%);">Day 2</div>
            <div class="swipe-panel day3" id="panel3" style="transform: translateX(200%);">Day 3</div>
        </div>
        <div class="swipe-indicator" id="swipeIndicator">Day 1 of 3 - Swipe to navigate</div>
    </div>

    <div class="test-section">
        <div class="test-title">üéØ Touch Target Test</div>
        <div class="test-description">
            All buttons are exactly 44px minimum. Tap them to verify touch accuracy and response time.
        </div>
        <div class="touch-targets" id="touchTargets">
            <!-- Generated by JavaScript -->
        </div>
    </div>

    <div class="test-section">
        <div class="test-title">üìÅ Collapsible Section Test</div>
        <div class="test-description">
            Tap headers to expand/collapse. Must animate smoothly and persist state.
        </div>
        <div class="collapsible-section">
            <div class="section-header" data-section="warmup">
                <span>Warm-up</span>
                <span class="chevron">‚ñº</span>
            </div>
            <div class="section-content">
                <div class="section-inner">
                    <p>‚Ä¢ 5 min light cardio</p>
                    <p>‚Ä¢ Dynamic stretching</p>
                    <p>‚Ä¢ Joint mobility</p>
                </div>
            </div>
        </div>
        <div class="collapsible-section">
            <div class="section-header" data-section="strength">
                <span>Strength Training</span>
                <span class="chevron">‚ñº</span>
            </div>
            <div class="section-content">
                <div class="section-inner">
                    <p>‚Ä¢ Squats: 3x12</p>
                    <p>‚Ä¢ Push-ups: 3x10</p>
                    <p>‚Ä¢ Planks: 3x30s</p>
                </div>
            </div>
        </div>
    </div>

    <div class="test-section">
        <div class="test-title">‚å®Ô∏è Input Field Test</div>
        <div class="test-description">
            Test various input types with number keyboards. Check focus states and auto-advance behavior.
        </div>
        <div class="input-grid">
            <input type="number" class="exercise-input" placeholder="Weight" min="0" max="500">
            <input type="number" class="exercise-input" placeholder="Reps" min="0" max="100">
            <input type="number" class="exercise-input" placeholder="Sets" min="0" max="10">
            <input type="text" class="exercise-input" placeholder="Time" pattern="[0-9:]+">
        </div>
    </div>

    <div class="test-section">
        <div class="test-title">üìä Test Results</div>
        <div class="test-results" id="testResults">
            <div class="result-success">‚úÖ Test suite initialized</div>
            <div class="result-warning">‚è≥ Waiting for user interactions...</div>
        </div>
    </div>

    <script>
        class MobileTester {
            constructor() {
                this.currentDay = 0;
                this.swipeThreshold = 30;
                this.touchStartX = 0;
                this.touchStartTime = 0;
                this.lastFrameTime = performance.now();
                this.frameCount = 0;
                this.fpsHistory = [];
                
                this.initializeTests();
                this.startPerformanceMonitoring();
            }

            initializeTests() {
                this.setupSwipeGestures();
                this.setupTouchTargets();
                this.setupCollapsibleSections();
                this.setupInputTests();
            }

            log(message, type = 'info') {
                const results = document.getElementById('testResults');
                const className = type === 'success' ? 'result-success' : 
                                type === 'error' ? 'result-error' : 'result-warning';
                const icon = type === 'success' ? '‚úÖ' : type === 'error' ? '‚ùå' : '‚ÑπÔ∏è';
                
                const div = document.createElement('div');
                div.className = className;
                div.textContent = `${icon} ${message}`;
                results.appendChild(div);
                results.scrollTop = results.scrollHeight;
            }

            setupSwipeGestures() {
                const container = document.getElementById('swipeContainer');
                let startX = 0;
                let currentX = 0;
                let isDragging = false;

                container.addEventListener('touchstart', (e) => {
                    this.touchStartTime = performance.now();
                    startX = e.touches[0].clientX;
                    isDragging = true;
                    this.log('Touch start detected');
                }, { passive: true });

                container.addEventListener('touchmove', (e) => {
                    if (!isDragging) return;
                    
                    currentX = e.touches[0].clientX;
                    const deltaX = currentX - startX;
                    
                    // Visual feedback during drag
                    const panels = container.querySelectorAll('.swipe-panel');
                    panels.forEach((panel, index) => {
                        const baseTransform = (index - this.currentDay) * 100;
                        const dragOffset = (deltaX / container.offsetWidth) * 100;
                        panel.style.transform = `translateX(${baseTransform + dragOffset}%)`;
                    });
                }, { passive: true });

                container.addEventListener('touchend', (e) => {
                    if (!isDragging) return;
                    
                    const endTime = performance.now();
                    const touchLatency = endTime - this.touchStartTime;
                    document.getElementById('touchLatency').textContent = Math.round(touchLatency);
                    
                    const deltaX = currentX - startX;
                    const threshold = this.swipeThreshold;
                    
                    if (Math.abs(deltaX) > threshold) {
                        if (deltaX > 0 && this.currentDay > 0) {
                            this.currentDay--;
                            this.log(`Swiped right to Day ${this.currentDay + 1}`, 'success');
                        } else if (deltaX < 0 && this.currentDay < 2) {
                            this.currentDay++;
                            this.log(`Swiped left to Day ${this.currentDay + 1}`, 'success');
                        } else {
                            this.log(`Swipe ignored - at boundary or below ${threshold}px threshold`);
                        }
                    } else {
                        this.log(`Swipe too short: ${Math.abs(deltaX)}px < ${threshold}px threshold`);
                    }
                    
                    this.updateDayView();
                    isDragging = false;
                }, { passive: true });
            }

            updateDayView() {
                const container = document.getElementById('swipeContainer');
                const panels = container.querySelectorAll('.swipe-panel');
                const indicator = document.getElementById('swipeIndicator');
                
                panels.forEach((panel, index) => {
                    const offset = (index - this.currentDay) * 100;
                    panel.style.transform = `translateX(${offset}%)`;
                });
                
                indicator.textContent = `Day ${this.currentDay + 1} of 3 - Swipe to navigate`;
            }

            setupTouchTargets() {
                const container = document.getElementById('touchTargets');
                
                // Create 8 touch targets
                for (let i = 1; i <= 8; i++) {
                    const button = document.createElement('button');
                    button.className = 'touch-target';
                    button.textContent = i;
                    button.setAttribute('data-target', i);
                    
                    button.addEventListener('touchstart', (e) => {
                        this.touchStartTime = performance.now();
                    }, { passive: true });
                    
                    button.addEventListener('click', (e) => {
                        const endTime = performance.now();
                        const latency = endTime - this.touchStartTime;
                        
                        button.classList.add('tapped');
                        setTimeout(() => button.classList.remove('tapped'), 200);
                        
                        this.log(`Target ${i} tapped - ${Math.round(latency)}ms latency`, 
                                latency < 50 ? 'success' : 'warning');
                    });
                    
                    container.appendChild(button);
                }
            }

            setupCollapsibleSections() {
                const headers = document.querySelectorAll('.section-header');
                
                headers.forEach(header => {
                    header.addEventListener('click', () => {
                        const section = header.getAttribute('data-section');
                        const content = header.nextElementSibling;
                        const chevron = header.querySelector('.chevron');
                        
                        const isExpanded = content.classList.contains('expanded');
                        
                        if (isExpanded) {
                            content.classList.remove('expanded');
                            chevron.classList.remove('expanded');
                            this.log(`${section} section collapsed`, 'success');
                        } else {
                            content.classList.add('expanded');
                            chevron.classList.add('expanded');
                            this.log(`${section} section expanded`, 'success');
                        }
                    });
                });
            }

            setupInputTests() {
                const inputs = document.querySelectorAll('.exercise-input');
                
                inputs.forEach((input, index) => {
                    input.addEventListener('focus', () => {
                        this.log(`Input ${index + 1} focused - keyboard should appear`);
                    });
                    
                    input.addEventListener('input', () => {
                        this.log(`Input ${index + 1} changed: "${input.value}"`);
                    });
                    
                    input.addEventListener('blur', () => {
                        this.log(`Input ${index + 1} blurred`);
                    });
                });
            }

            startPerformanceMonitoring() {
                const measureFPS = () => {
                    const now = performance.now();
                    const delta = now - this.lastFrameTime;
                    this.lastFrameTime = now;
                    
                    const fps = 1000 / delta;
                    this.fpsHistory.push(fps);
                    
                    if (this.fpsHistory.length > 60) { // Keep last 60 frames
                        this.fpsHistory.shift();
                    }
                    
                    const avgFPS = this.fpsHistory.reduce((a, b) => a + b, 0) / this.fpsHistory.length;
                    document.getElementById('fpsValue').textContent = Math.round(avgFPS);
                    
                    requestAnimationFrame(measureFPS);
                };
                
                requestAnimationFrame(measureFPS);
            }
        }

        // Initialize when DOM is ready
        document.addEventListener('DOMContentLoaded', () => {
            new MobileTester();
        });

        // Prevent zoom on double tap
        let lastTouchEnd = 0;
        document.addEventListener('touchend', function (event) {
            const now = (new Date()).getTime();
            if (now - lastTouchEnd <= 300) {
                event.preventDefault();
            }
            lastTouchEnd = now;
        }, false);
    </script>
</body>
</html> 